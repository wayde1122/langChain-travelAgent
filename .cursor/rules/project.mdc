---
description: 旅行助手项目的 Cursor AI 规则，定义编码规范和协作指南
globs: ["**/*.ts", "**/*.tsx", "**/*.js", "**/*.jsx"]
alwaysApply: true
---

# 旅行助手 - Cursor 规则

## 项目概述

这是一个基于 LangChain.js + Next.js 的 AI 旅行助手应用。

## 必读文档

在开始任何任务前，请先阅读：
1. `CLAUDE.md` - AI 协作指南
2. `SPEC.md` - 编码规范
3. `openspec/project.md` - 项目上下文

## 编码规范

### TypeScript
- 使用严格模式，禁止 `any`
- 优先使用 `interface` 而非 `type`
- 导出类型使用 `export type`

### React/Next.js
- 使用函数式组件 + Hooks
- 优先使用 Server Components
- 仅必要时添加 `"use client"`

### 样式
- 使用 Tailwind CSS
- 使用 shadcn/ui 组件
- 使用 `cn()` 合并类名

### 命名
- 组件：PascalCase（`ChatInput.tsx`）
- 函数：camelCase（`sendMessage`）
- 常量：UPPER_SNAKE_CASE（`MAX_LENGTH`）

## 导入顺序

```typescript
// 1. React/Next
import { useState } from 'react';
// 2. 第三方库
import { create } from 'zustand';
// 3. 内部模块 (@/)
import { useChatStore } from '@/store';
// 4. 相对路径
import { Button } from './Button';
// 5. 类型
import type { Message } from '@/types';
```

## 禁止事项

- ❌ 不使用 `any` 类型
- ❌ 不硬编码 API Key
- ❌ 不跳过 TypeScript 错误
- ❌ 不删除测试文件
- ❌ 不修改 node_modules

## 代码生成指南

1. 先读取相关文件，理解现有代码风格
2. 遵循 SPEC.md 中的规范
3. 小步迭代，每次聚焦单一功能
4. 复杂逻辑添加注释

## 测试要求

- 工具函数：必须有单元测试
- 组件：关键交互需要测试
- API：Mock 外部依赖

## 提交前

```bash
npm run lint        # ESLint 检查
npm run type-check  # TypeScript 检查
npm run test        # 运行测试
```

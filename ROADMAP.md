# æ—…è¡ŒåŠ©æ‰‹ - è¿­ä»£å¼€å‘è§„åˆ’

> ä¸€ä¸ªåŸºäº LangChain.js + Next.js çš„ AI æ—…è¡ŒåŠ©æ‰‹ï¼Œé€šè¿‡æ¸è¿›å¼å¼€å‘å­¦ä¹  LLM åº”ç”¨æ„å»ºã€‚

---

## é¡¹ç›®æ„¿æ™¯

æ„å»ºä¸€ä¸ª**ä¸“ä¸šçš„æ—…è¡ŒåŠ©æ‰‹**ï¼Œèƒ½å¤Ÿï¼š

- å›ç­”æ—…è¡Œç›¸å…³é—®é¢˜
- æä¾›è¡Œç¨‹è§„åˆ’å»ºè®®
- æŸ¥è¯¢å®æ—¶ä¿¡æ¯ï¼ˆå¤©æ°”ã€æ±‡ç‡ç­‰ï¼‰
- ç»™å‡ºä¸ªæ€§åŒ–æ¨è

---

## æŠ€æœ¯æ ˆï¼ˆå¾…å®šï¼‰

| ç±»åˆ«     | é€‰é¡¹                     | çŠ¶æ€                    |
| -------- | ------------------------ | ----------------------- |
| æ¡†æ¶     | Next.js 14+ (App Router) | âœ… å·²å®š                 |
| AI æ¡†æ¶  | LangChain.js             | âœ… å·²å®š                 |
| æ ·å¼     | Tailwind CSS + shadcn/ui | âœ… å·²å®šï¼ˆåˆå§‹åŒ–æ—¶é›†æˆï¼‰ |
| çŠ¶æ€ç®¡ç† | Zustand                  | âœ… å·²å®š                 |
| LLM      | æ™ºè°± AI (GLM)            | âœ… å·²å®š                 |
| æ•°æ®åº“   | Supabase / PostgreSQL    | ğŸ“… åæœŸ                 |
| å‘é‡åº“   | pgvector / Pinecone      | ğŸ“… åæœŸ                 |
| å·¥å…·è°ƒç”¨ | LangChain Tools â†’ MCP    | ğŸ“… é˜¶æ®µ 3               |
| ä»£ç è§„èŒƒ | ESLint + Prettier        | âœ… å·²å®šï¼ˆåˆå§‹åŒ–æ—¶é›†æˆï¼‰ |
| Git é’©å­ | Husky + lint-staged      | âœ… å·²å®šï¼ˆåˆå§‹åŒ–æ—¶é›†æˆï¼‰ |
| æµ‹è¯•æ¡†æ¶ | Vitest + Testing Library | âœ… å·²å®šï¼ˆåˆå§‹åŒ–æ—¶é›†æˆï¼‰ |
| CI/CD    | GitHub Actions + Vercel  | âœ… å·²å®šï¼ˆåˆå§‹åŒ–æ—¶é›†æˆï¼‰ |

---

## è¿­ä»£é˜¶æ®µæ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ 1        é˜¶æ®µ 2        é˜¶æ®µ 3        åç»­æ‰©å±•     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€      â”€â”€â”€â”€â”€â”€â”€      â”€â”€â”€â”€â”€â”€â”€      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚  åŸºç¡€å¯¹è¯  â†’   æµå¼ä½“éªŒ  â†’   å·¥å…·è°ƒç”¨  â†’   æŒä¹…åŒ–/RAG   â”‚
â”‚                                                         â”‚
â”‚  èƒ½è·‘å°±è¡Œ      æ‰“å­—æœºæ•ˆæœ    çœŸæ­£èƒ½åšäº‹    ç”Ÿäº§çº§åŠŸèƒ½    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## é˜¶æ®µ 1ï¼šåŸºç¡€å¯¹è¯

### ç›®æ ‡

è·‘é€šæœ€å°é—­ç¯ï¼šç”¨æˆ·è¾“å…¥ â†’ è°ƒç”¨ LLM â†’ æ˜¾ç¤ºå›å¤

### ä»»åŠ¡æ¸…å•

- [âœ…] **1.1 ç¯å¢ƒæ­å»º**
  - åˆ›å»º Next.js é¡¹ç›®ï¼ˆé€‰æ‹© Tailwind CSS + ESLintï¼‰
  - åˆå§‹åŒ– shadcn/ui
  - é…ç½® ESLint + Prettier ä»£ç è§„èŒƒ
  - é…ç½® Husky + lint-stagedï¼ˆGit é’©å­ï¼‰
  - é…ç½® Vitest æµ‹è¯•æ¡†æ¶
  - å®‰è£… Zustand çŠ¶æ€ç®¡ç†
  - å®‰è£… LangChain ç›¸å…³ä¾èµ–
  - é…ç½®ç¯å¢ƒå˜é‡ï¼ˆAPI Keyï¼‰
  - åˆ›å»º OpenSpec è§„èŒƒç›®å½•

- [ ] **1.2 åç«¯ API**
  - åˆ›å»º `/api/chat` è·¯ç”±
  - å®ç°åŸºç¡€çš„ LLM è°ƒç”¨
  - æµ‹è¯• API èƒ½æ­£å¸¸è¿”å›

- [ ] **1.3 å‰ç«¯é¡µé¢**
  - åˆ›å»ºèŠå¤©ç•Œé¢ï¼ˆè¾“å…¥æ¡† + æ¶ˆæ¯åˆ—è¡¨ï¼‰
  - å®ç°å‘é€æ¶ˆæ¯åŠŸèƒ½
  - æ˜¾ç¤º AI å›å¤

- [ ] **1.4 å¯¹è¯å†å²**
  - å‰ç«¯ç»´æŠ¤ messages æ•°ç»„
  - æ¯æ¬¡è¯·æ±‚å¸¦ä¸Šå†å²æ¶ˆæ¯
  - å®ç°å¤šè½®å¯¹è¯

- [ ] **1.5 åŸºç¡€ Prompt**
  - è®¾è®¡æ—…è¡ŒåŠ©æ‰‹çš„ System Prompt
  - å®šä¹‰è§’è‰²ã€èƒ½åŠ›ã€é£æ ¼

### éªŒæ”¶æ ‡å‡†

- [ ] èƒ½é—®"åŒ—äº¬æœ‰ä»€ä¹ˆå¥½ç©çš„"å¹¶å¾—åˆ°å›ç­”
- [ ] èƒ½è¿›è¡Œå¤šè½®å¯¹è¯ï¼ŒAI è®°å¾—ä¸Šä¸‹æ–‡
- [ ] éæ—…è¡Œé—®é¢˜èƒ½ç¤¼è²Œæ‹’ç»ï¼ˆå¯é€‰ï¼‰

### å­¦ä¹ è¦ç‚¹

- LangChain çš„ `ChatZhipuAI` ä½¿ç”¨
- Next.js App Router çš„ Route Handler
- Zustand çŠ¶æ€ç®¡ç†
- å‰åç«¯æ•°æ®ä¼ é€’
- Prompt Engineering åŸºç¡€

---

## é˜¶æ®µ 2ï¼šæµå¼ä½“éªŒ

### ç›®æ ‡

å®ç°æ‰“å­—æœºæ•ˆæœï¼Œæå‡ç”¨æˆ·ä½“éªŒ

### ä»»åŠ¡æ¸…å•

- [ ] **2.1 åç«¯æµå¼æ”¹é€ **
  - å­¦ä¹  LangChain çš„ `.stream()` æ–¹æ³•
  - åç«¯è¿”å› SSEï¼ˆServer-Sent Eventsï¼‰
  - å¤„ç†æµå¼ä¼ è¾“çš„ chunk

- [ ] **2.2 å‰ç«¯æµå¼æ¥æ”¶**
  - ä½¿ç”¨ Vercel AI SDK çš„ `useChat`ï¼ˆæ¨èï¼‰
  - æˆ–æ‰‹åŠ¨å®ç° EventSource æ¥æ”¶
  - å®æ—¶æ›´æ–°æ¶ˆæ¯å†…å®¹

- [ ] **2.3 äº¤äº’ä¼˜åŒ–**
  - æ·»åŠ åŠ è½½çŠ¶æ€æŒ‡ç¤º
  - å®ç°"åœæ­¢ç”Ÿæˆ"æŒ‰é’®
  - å¤„ç†ç½‘ç»œé”™è¯¯å’Œé‡è¯•

### éªŒæ”¶æ ‡å‡†

- [ ] AI å›å¤åƒæ‰“å­—ä¸€æ ·é€å­—å‡ºç°
- [ ] ç”Ÿæˆè¿‡ç¨‹ä¸­èƒ½çœ‹åˆ°åŠ è½½çŠ¶æ€
- [ ] å¯ä»¥ä¸­æ–­æ­£åœ¨ç”Ÿæˆçš„å›å¤

### å­¦ä¹ è¦ç‚¹

- SSE åŸç†å’Œå®ç°
- æµå¼æ•°æ®å¤„ç†
- å‰ç«¯çŠ¶æ€ç®¡ç†
- é”™è¯¯å¤„ç†å’Œç”¨æˆ·ä½“éªŒ

---

## é˜¶æ®µ 3ï¼šå·¥å…·è°ƒç”¨

### ç›®æ ‡

è®©åŠ©æ‰‹èƒ½è°ƒç”¨å¤–éƒ¨ APIï¼Œä»"èŠå¤©"å‡çº§ä¸º"Agent"

### ä»»åŠ¡æ¸…å•

- [ ] **3.1 ç†è§£ Function Calling**
  - å­¦ä¹  LLM çš„ Function Calling åŸç†
  - äº†è§£ LangChain Tools çš„å®šä¹‰æ–¹å¼
  - ç†è§£ Agent çš„å†³ç­–æµç¨‹

- [ ] **3.2 å®ç°ç¬¬ä¸€ä¸ªå·¥å…·**
  - é€‰æ‹©ä¸€ä¸ªç®€å•çš„ APIï¼ˆå¦‚å¤©æ°”æŸ¥è¯¢ï¼‰
  - å®šä¹‰ Tool Schema
  - æ¥å…¥ LangChain Agent

- [ ] **3.3 æ‰©å±•æ›´å¤šå·¥å…·**
  - æ±‡ç‡æ¢ç®—
  - æ™¯ç‚¹æœç´¢
  - å…¶ä»–æ—…è¡Œç›¸å…³ API

- [ ] **3.4 æ¢ç´¢ MCPï¼ˆå¯é€‰ï¼‰**
  - äº†è§£ MCP åè®®
  - å°è¯•ç”¨ MCP æ›¿ä»£ LangChain Tools
  - å¯¹æ¯”ä¸¤ç§æ–¹æ¡ˆçš„ä¼˜åŠ£

### éªŒæ”¶æ ‡å‡†

- [ ] é—®"ä¸œäº¬ä»Šå¤©å¤©æ°”"èƒ½è¿”å›çœŸå®æ•°æ®
- [ ] é—®"100 ç¾å…ƒç­‰äºå¤šå°‘æ—¥å…ƒ"èƒ½å®æ—¶è®¡ç®—
- [ ] AI èƒ½è‡ªåŠ¨åˆ¤æ–­ä½•æ—¶éœ€è¦è°ƒç”¨å·¥å…·

### å­¦ä¹ è¦ç‚¹

- Function Calling / Tool Use åŸç†
- Agent å†³ç­–å¾ªç¯
- å¤–éƒ¨ API é›†æˆ
- MCP åè®®ï¼ˆè¿›é˜¶ï¼‰

---

## åç»­æ‰©å±•ï¼ˆæŒ‰éœ€ï¼‰

ä»¥ä¸‹åŠŸèƒ½å¯åœ¨æ ¸å¿ƒå®ŒæˆåæŒ‰éœ€æ·»åŠ ï¼š

### æŒä¹…åŒ–

- [ ] ç”¨æˆ·è®¤è¯ï¼ˆNextAuth / Supabase Authï¼‰
- [ ] å¯¹è¯å†å²å­˜æ•°æ®åº“
- [ ] å†å²ä¼šè¯åˆ—è¡¨å’Œç®¡ç†

### RAG çŸ¥è¯†å¢å¼º

- [ ] å‡†å¤‡æ—…è¡ŒçŸ¥è¯†æ–‡æ¡£
- [ ] æ–‡æ¡£å‘é‡åŒ–å­˜å‚¨
- [ ] æ£€ç´¢ç›¸å…³çŸ¥è¯†æ³¨å…¥ Prompt

### UI æ·±åº¦ä¼˜åŒ–

- [ ] æ·±è‰²æ¨¡å¼æ”¯æŒ
- [ ] å“åº”å¼è®¾è®¡ï¼ˆç§»åŠ¨ç«¯é€‚é…ï¼‰
- [ ] åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ
- [ ] è‡ªå®šä¹‰ä¸»é¢˜é…è‰²

### é«˜çº§åŠŸèƒ½

- [ ] ç»“æ„åŒ–è¾“å‡ºï¼ˆè¡Œç¨‹å¡ç‰‡ï¼‰
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] è¯­éŸ³è¾“å…¥/è¾“å‡º

---

## å¾…å†³ç­–äº‹é¡¹

åœ¨å¼€å§‹å‰éœ€è¦ç¡®å®šï¼š

| äº‹é¡¹         | é€‰é¡¹                         | å†³å®š    | é˜¶æ®µ      |
| ------------ | ---------------------------- | ------- | --------- |
| LLM æä¾›å•†   | æ™ºè°± AI (GLM)                | âœ… æ™ºè°± | é˜¶æ®µ 1 å‰ |
| åŒ…ç®¡ç†å™¨     | npm                          | âœ… npm  | é˜¶æ®µ 1 å‰ |
| é¦–ä¸ªå·¥å…· API | å¤©æ°” / æ±‡ç‡ / å…¶ä»–           |         | é˜¶æ®µ 3 å‰ |
| æ•°æ®åº“       | Supabase / PostgreSQL / å…¶ä»– |         | åç»­æ‰©å±•  |
| å‘é‡åº“       | pgvector / Pinecone / Chroma |         | åç»­æ‰©å±•  |

---

## å¼€å‘åŸåˆ™

1. **æ¸è¿›å¼** - æ¯ä¸ªé˜¶æ®µéƒ½èƒ½ç‹¬ç«‹è¿è¡Œ
2. **å…ˆè·‘é€šå†ä¼˜åŒ–** - èƒ½è·‘ > å¥½çœ‹ > å®Œç¾
3. **è‡ªå·±å†™ä»£ç ** - ç†è§£åŸç†æ¯”å¤åˆ¶ç²˜è´´é‡è¦
4. **åŠæ—¶è®°å½•** - é‡åˆ°çš„å‘å’Œè§£å†³æ–¹æ¡ˆå†™è¿›æ–‡æ¡£

---

## å‚è€ƒèµ„æº

- [LangChain.js æ–‡æ¡£](https://js.langchain.com/docs/)
- [æ™ºè°± AI å¼€æ”¾å¹³å°](https://open.bigmodel.cn/)
- [Next.js æ–‡æ¡£](https://nextjs.org/docs)
- [Zustand æ–‡æ¡£](https://zustand-demo.pmnd.rs/)
- [shadcn/ui æ–‡æ¡£](https://ui.shadcn.com/)
- [Vercel AI SDK](https://sdk.vercel.ai/docs)
- [MCP åè®®](https://modelcontextprotocol.io/)

---

_æœ€åæ›´æ–°ï¼š2026-01-22_
